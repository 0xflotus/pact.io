<!DOCTYPE HTML>
<html lang="en-US" >
    
    <head>
        
        <meta charset="UTF-8">
        <title>Matching gotchas | Pact</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 1.0.3">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    
    <link rel="next" href="../faq/README.html" />
    
    
    <link rel="prev" href="../best_practices/provider.html" />
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="../gitbook/style.css">


        
    <div class="book"  data-level="2.3" data-basepath=".." data-revision="1457484960665">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
    	
    	
    	

        

        
    
        
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                        <i class="fa fa-check"></i>
                        
                         Introduction
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1" data-path="documentation/README.html">
            
                
                    <a href="../documentation/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                         Getting Started
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="1.1" data-path="documentation/how_does_pact_work.html">
            
                
                    <a href="../documentation/how_does_pact_work.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                         Terminology
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="2" data-path="best_practices/README.html">
            
                
                    <a href="../best_practices/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                         Best practices
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="2.1" data-path="best_practices/consumer.html">
            
                
                    <a href="../best_practices/consumer.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                         Consumer
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.2" data-path="best_practices/provider.html">
            
                
                    <a href="../best_practices/provider.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                         Provider
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter active" data-level="2.3" data-path="best_practices/matching_gotchas.html">
            
                
                    <a href="../best_practices/matching_gotchas.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                         Matching gotchas
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="3" data-path="faq/README.html">
            
                
                    <a href="../faq/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                         FAQ
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4" data-path="getting_help/README.html">
            
                
                    <a href="../getting_help/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                         Getting Help
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="5" data-path="contributing/README.html">
            
                
                    <a href="../contributing/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                         Contributing
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6" data-path="about_pact/README.html">
            
                
                    <a href="../about_pact/README.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                         Contributors
                    </a>
                
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Published using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Toggle share dropdown"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">Twitter</button>
                <button type="button" data-sharing="google-plus" class="button">Google</button>
                <button type="button" data-sharing="facebook" class="button">Facebook</button>
                <button type="button" data-sharing="weibo" class="button">Weibo</button>
                <button type="button" data-sharing="instapaper" class="button">Instapaper</button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
    
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >Pact</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-gitbook_801">
                    
                        <h1 id="matching-gotchas">Matching Gotcha&#39;s</h1>
<h3 id="pact-follows-postels-lawhttpsenwikipediaorgwikirobustness_principle">Pact follows <a href="https://en.wikipedia.org/wiki/Robustness_principle" target="_blank">Postel&#39;s law</a></h3>
<p><em>Be conservative in what you send</em> - when the mock server in the consumer project compares the actual request with the expected request, the actual request body is not allowed to contain fields that are not defined in the expected request body. We don&#39;t want the situation where our real consumer is &quot;leaking&quot; data that we don&#39;t know about.</p>
<p><em>Be liberal in what you accept</em> - when verifying a pact in the provider project, the response body and headers may contain fields that were not defined in the expectations, on the assumption that any extra field will be ignored by your consumer. This allows a provider to evolve without breaking existing consumers (unlike the bad old WSDL days).</p>
<h3 id="but-pact-breaks-postels-law-for-request-headers">But Pact breaks Postel&#39;s law for request headers</h3>
<p>The exception to this is the request headers - we have found that frameworks tend to add their own headers, and that maintaining these can be extremely tedious, so be aware that if you are using a header that will change the behavior of the provider, you <em>must</em> specify it in your expectations.</p>
<h3 id="an-empty-hash-in-the-response-means-allow-any-hash">An empty hash in the response means &quot;allow any hash&quot;</h3>
<p>Following Postel&#39;s law, when verifying a pact in the provider project, the response body and headers may contain fields that were not defined in the expectations. This means that if you specify an empty hash, you are actually saying, &quot;expect a hash here with anything in it&quot;.</p>
<h3 id="you-cannot-expect-a-field-to-not-be-present-in-a-response">You cannot expect a field to not be present in a response</h3>
<p>Following Postel&#39;s law, the provider may return fields that the consumer will just ignore. The provider may have a pact with another consumer that requires those fields, so your consumer cannot tell the provider what it should not do. It can only specify what it should do.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../best_practices/provider.html" class="navigation navigation-prev " aria-label="Previous page: Provider"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../faq/README.html" class="navigation navigation-next " aria-label="Next page: FAQ"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="https://cdn.mathjax.org/mathjax/2.4-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
